export async function loadTemplate(e="myDiv",t="main",r){try{let l=window.location.origin,o=await fetch(l+"/template.html");if(!o.ok)throw Error("Failed to fetch template");let c=await o.text(),n=new DOMParser,a=n.parseFromString(c,"text/html"),i=a.querySelector("head");if(i){document.head.innerHTML+=i.innerHTML;let d=document.head.querySelectorAll("link");d.forEach(e=>{e.href&&(e.href=l+"/"+e.getAttribute("href"))});let y=document.head.querySelectorAll("script");y.forEach(e=>{e.src&&(e.src=l+"/"+e.getAttribute("src"))})}let h=a.querySelector("body");if(h){let f=h.querySelector(".navbar"),s=h.querySelector(".footer");f&&document.body.insertAdjacentElement("afterbegin",f.cloneNode(!0));let b=h.querySelector(`#${t}`),u=document.getElementById(e);b&&u&&(b.innerHTML=u.innerHTML,b.style.display="block",u.remove(),document.body.appendChild(b)),s&&document.body.insertAdjacentElement("beforeend",s.cloneNode(!0));let m=document.body.querySelectorAll("a");m.forEach(e=>{e.href&&(e.href=l+"/"+e.getAttribute("href"))});let p=document.body.querySelectorAll("img");p.forEach(e=>{e.src&&(e.src=l+"/"+e.getAttribute("src"))})}let A=a.querySelectorAll("script");A.forEach(e=>{let t=document.createElement("script");e.src?t.src=l+"/"+e.getAttribute("src"):t.textContent=e.textContent,document.body.appendChild(t)}),r&&r()}catch(g){console.error("Error loading template:",g)}}